# FeAR
## Feasible Action-Space Reduction (FeAR) for Causal Responsibility in Multi-Agent Spatial Interactions

## Contents

### Main Files

| File                      | Function                                              |
|---------------------------|-------------------------------------------------------|
| `GWorld.py`               | Grid World Simulation Environment                     |
| `Responsibility.py`       | Calculate FeAR Values                                 |
| `FeAR_Sims.ipynb`         | Run Simulations with GWorld and calculate FeAR values |
| `AnalysisOf_FeAR_Sims.py` | Visualise and Analyse the results from FeAR_Sims      |

### Helper Files

| File                     | Function                                                                                                  |
|:-------------------------|:----------------------------------------------------------------------------------------------------------|
| `Agent.py`               | Agents used in GWorld                                                                                     |
| `PlotGWorld.py`          | Plotters for GWorld                                                                                       |
| `Scenario4FeARSims.json` | JSON file with Scenarios to be used in FeAR_Sims                                                          |
| `ScenarioBuilder.ipynb`  | To generate new scenarios for FeAR_Sims                                                                   |
| `Instances2plot.json`    | JSON file containing the list of instances for which plots will be generated by `AnalysisOf_FeAR_Sims.py` |

## Instructions to view results

- Run `AnalysisOf_FeAR_Sims.py` to see the UI that plots the results
- Use &uarr; and &darr; arrow keys om the keyboard to scroll through different instances
- Use &larr; and &rarr; arrow keys om the keyboard to change the groups of instances shown
- Use (`PAGEDOWN` or `RIGHTSHIFT`) and (`PAGEUP` or `LEFTSHIFT`) to change records.
- Pressing `P` adds the current instance to `Instances2plot.json`
- Pressing `G` generates plots for the instances in `Instances2plot.json` and saves them to `\Plots\ `
- Press `S` to toggle between '**Sequential View**' and '**Extremes View**'
  - In '**Extremes View**' instances are sorted in order of the values of FeAR (Starts here by default).
  - In '**Sequential View**' instances are sorted by temporal order. 
    - To see how situations evolve over time, and
    - To inspect every single instance irrespective of the FeAR values.

## Instructions to run simulations
- To run simulations and to calculate FeAR values use the notebook `FeAR_Sims.ipynb`.
- Detailed instructions are included in the notebook.
- `FeAR_Sims.ipynb` uses scenarios defined in `Scenario4FeARSims.json`.
- To generate new scenarios for FeAR_Sims use the notebook `ScenarioBuilder.ipynb`


## Authors

- Ashwin George - PhD student @ TU Delft

## Funding and support

- TU Delft

## Reference
- George, A., Siebert, L. C., Abbink, D., & Zgonnikov, A. (2023). Measuring Causal Responsibility in Multi-Agent Spatial Interactions with Feasible Action-Space Reduction. ECAI-23, accepted, https://arxiv.org/abs/2305.15003


## Copyright notice:

Technische Universiteit Delft hereby disclaims all copyright interest in the program “FeAR” (Feasible Action-Space Reduction) written by Ashwin George. Fred van Keulen, Dean of Mechanical, Maritime and Materials Engineering

© 2023, Ashwin George, HERALD Lab, TU Delft